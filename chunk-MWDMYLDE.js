import{a as z}from"./chunk-LVPNQU37.js";import{a as le}from"./chunk-OU5BUBHV.js";import{a as Ee,b as Te,c as Fe,d as ke,e as Ve,f as Ae,g as We,h as ze,i as Re,j as Be,k as je,l as Le,m as He,n as Ue,o as qe,p as Ge,q as Xe,r as fe,s as ge,t as Ke,u as Je}from"./chunk-2UPKGN5O.js";import{a as Ne}from"./chunk-C5YLPQLY.js";import{e as Ye,f as ue}from"./chunk-J7F7KZJ2.js";import{a as ye,c as Qe,e as K,f as j,g as se,h as ce,i as de,q as me,r as pe}from"./chunk-YBJLJ2WG.js";import{l as we,m as Ze}from"./chunk-6OMSEINS.js";import{B,C as J,b as X,d as Z,g as Q,h as ne,i as ie,k as F,l as oe,m as ve,n as Pe,o as ae,p as Se,q as Ie,r as re,s as R,t as Oe,v as De,z as Y}from"./chunk-MZKIP52W.js";import{Ia as G,da as te,i as ee}from"./chunk-OZO5R2AD.js";import{$b as he,Bb as _,Hb as k,Lb as a,Mb as o,Nb as T,Ob as H,Pb as U,Rb as O,Ub as V,Wb as p,ac as xe,bc as be,cc as Me,db as d,dc as l,eb as L,ec as A,fc as q,hc as x,ic as b,ja as v,jc as M,kc as $,lc as W,oa as N,wb as S,xa as f,ya as C}from"./chunk-CPJRB4V3.js";import{g,h as w,i as y}from"./chunk-73B72BQ3.js";var $e=(()=>{var c,e;let r=class r{constructor(n){w(this,c,void 0);w(this,e,void 0);this.data=n,y(this,c,v(j)),y(this,e,v(z)),this.formDeleteConsumoDiario=new ie({fecha:new F("",[Z.required]),hora:new F("",[Z.required]),comida:new F("",[Z.required]),calorias:new F("",[Z.required])}),this.fecha="",this.hora="",this.comida="",this.calorias="",this.idUsuario=""}ngOnInit(){console.log(this.data),this.fecha=this.data.fecha,this.hora=this.data.hora,this.comida=this.data.nombre,this.calorias=this.data.calorias,this.obtenerUsuario()}deleteConsumoDiario(){console.log("delete");let n=localStorage.getItem("idUsuarioLogeado")||"";g(this,e).deleteConsumoDiario(this.comida,this.fecha,this.hora,n).subscribe(m=>{console.log(m),m.code===200&&(this.closeDialog(),location.reload())})}closeDialog(){g(this,c).closeAll()}obtenerUsuario(){this.idUsuario=localStorage.getItem("idUsuarioLogeado")??""}};c=new WeakMap,e=new WeakMap,r.\u0275fac=function(m){return new(m||r)(L(K))},r.\u0275cmp=N({type:r,selectors:[["app-form-eliminar-consumo-diario"]],standalone:!0,features:[W],decls:30,vars:5,consts:[[1,"popUp"],[1,"cabecera"],[3,"formGroup"],[1,"formPeso"],[1,"infoPeso"],[1,"infoIzq"],[1,"infoDer"],[1,"pieForm"],[1,"btnCancelar",3,"click"],[1,"btnEliminar",3,"click"]],template:function(m,h){m&1&&(a(0,"div",0)(1,"div",1)(2,"h1"),l(3,"\xBFDesea eliminar el siguiente consumo?"),o()(),a(4,"form",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"p")(9,"strong"),l(10,"Fecha: "),o(),l(11),o(),a(12,"p")(13,"strong"),l(14,"Hora: "),o(),l(15),o()(),a(16,"div",6)(17,"p")(18,"strong"),l(19,"Comida: "),o(),l(20),o(),a(21,"p")(22,"strong"),l(23,"Calor\xEDas: "),o(),l(24),o()()()(),a(25,"div",7)(26,"button",8),V("click",function(){return h.closeDialog()}),l(27,"Cancelar"),o(),a(28,"button",9),V("click",function(){return h.deleteConsumoDiario()}),l(29,"Eliminar"),o()()()()),m&2&&(d(4),_("formGroup",h.formDeleteConsumoDiario),d(7),A(h.fecha),d(4),A(h.hora),d(5),A(h.comida),d(4),A(h.calorias))},dependencies:[R,ve,ne,ae,Y,B,G],styles:[".popUp[_ngcontent-%COMP%]{background-color:#f8f9fa;border-radius:5px;padding:20px;width:100%;margin:0 auto;text-align:center;border:2px solid var(--EXTRA_BLACK)}.infoPeso[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:5%}.infoIzq[_ngcontent-%COMP%], .infoDer[_ngcontent-%COMP%]{width:50%}.pieForm[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly;margin-top:20px}button[_ngcontent-%COMP%]{color:#fff;padding:15px 60px;border:none;border-radius:5px;font-size:16px}.btnEliminar[_ngcontent-%COMP%]{background-color:var(--ERROR_500)}.btnCancelar[_ngcontent-%COMP%]{background-color:var(--SUCCESS_600)}@media (max-width: 768px){h1[_ngcontent-%COMP%]{font-size:24px}p[_ngcontent-%COMP%]{font-size:16px}.pieForm[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;justify-content:space-evenly}button[_ngcontent-%COMP%]{padding:7px 0!important;font-size:14px;width:45%}}"]});let i=r;return i})();function it(i,c){if(i&1){let e=O();a(0,"div",8)(1,"label",37),l(2,"Instrucciones"),o(),a(3,"textarea",38),M("ngModelChange",function(t){f(e);let n=p(2);return b(n.instrucciones,t)||(n.instrucciones=t),C(t)}),l(4," "),o()()}if(i&2){let e=p(2);d(3),x("ngModel",e.instrucciones)}}function ot(i,c){if(i&1){let e=O();a(0,"div",18)(1,"label",39),l(2,"Marca del alimento "),o(),a(3,"input",40),M("ngModelChange",function(t){f(e);let n=p(2);return b(n.marca,t)||(n.marca=t),C(t)}),o()()}if(i&2){let e=p(2);d(3),x("ngModel",e.marca),_("min",1)}}function at(i,c){if(i&1){let e=O();a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),l(5),o()(),a(6,"div",4)(7,"h4"),l(8,"Informaci\xF3n principal de la receta"),o()()(),a(9,"div",5)(10,"div",6)(11,"div",7)(12,"div",8)(13,"label",9),l(14,"Nombre"),o(),a(15,"p-autoComplete",10),M("ngModelChange",function(t){f(e);let n=p();return b(n.nombreAlimento,t)||(n.nombreAlimento=t),C(t)}),V("completeMethod",function(){f(e);let t=p();return C(t.onInputChange(t.nombreAlimento))})("click",function(){f(e);let t=p();return C(t.mostrar(t.nombreAlimento))}),o()(),a(16,"div",8)(17,"label",11),l(18,"Descripci\xF3n"),o(),a(19,"textarea",12),M("ngModelChange",function(t){f(e);let n=p();return b(n.descripcion,t)||(n.descripcion=t),C(t)}),l(20," "),o()()(),a(21,"div",13)(22,"div",8)(23,"label",14),l(24,"Cantidad ingerida (gr o ml)"),o(),a(25,"input",15),M("ngModelChange",function(t){f(e);let n=p();return b(n.cantidad,t)||(n.cantidad=t),C(t)}),o()(),S(26,it,5,1,"div",8)(27,ot,4,2),o()(),a(28,"div",16)(29,"div",17)(30,"div",18)(31,"label",19),l(32,"Calor\xEDas (gr)"),o(),a(33,"input",20),M("ngModelChange",function(t){f(e);let n=p();return b(n.calorias,t)||(n.calorias=t),C(t)}),o()(),a(34,"div",18)(35,"label",21),l(36,"Prote\xEDnas (gr)"),o(),a(37,"input",22),M("ngModelChange",function(t){f(e);let n=p();return b(n.proteinas,t)||(n.proteinas=t),C(t)}),o()(),a(38,"div",18)(39,"label",23),l(40,"Grasas (gr)"),o(),a(41,"input",24),M("ngModelChange",function(t){f(e);let n=p();return b(n.grasas,t)||(n.grasas=t),C(t)}),o()()(),a(42,"div",25)(43,"div",18)(44,"label",26),l(45,"Carbohidratos"),o(),a(46,"input",27),M("ngModelChange",function(t){f(e);let n=p();return b(n.carbohidratos,t)||(n.carbohidratos=t),C(t)}),o()(),a(47,"div",18)(48,"label",28),l(49,"Az\xFAcares (gr)"),o(),a(50,"input",29),M("ngModelChange",function(t){f(e);let n=p();return b(n.azucares,t)||(n.azucares=t),C(t)}),o()()(),a(51,"div",30)(52,"div",31)(53,"div",32),T(54,"p-image",33),o()()()()(),a(55,"div",34)(56,"button",35),V("click",function(){f(e);let t=p();return C(t.closeDialog())}),l(57,"Cancelar"),o(),a(58,"button",36),V("click",function(){f(e);let t=p();return C(t.guardarConsumo())}),l(59,"Confirmar cambios"),o()()()()}if(i&2){let e=p();d(5),q("Formulario editar ",e.receta?"receta":"comida",""),d(10),x("ngModel",e.nombreAlimento),_("suggestions",e.opcionesAlimentosNombre),d(4),x("ngModel",e.descripcion),d(6),x("ngModel",e.cantidad),_("min",1),d(),k(26,e.receta?26:27),d(7),x("ngModel",e.calorias),_("min",1),d(4),x("ngModel",e.proteinas),_("min",1),d(4),x("ngModel",e.grasas),_("min",1),d(5),x("ngModel",e.carbohidratos),_("min",1),d(4),x("ngModel",e.azucares),_("min",1),d(4),_("src",e.imagen)("preview",e.imgPreview)}}function rt(i,c){i&1&&T(0,"app-spinner-mostrar")}var et=(()=>{var c,e,r,t,n;let m=class m{constructor(u){w(this,c,void 0);w(this,e,void 0);w(this,r,void 0);w(this,t,void 0);w(this,n,void 0);this.data=u,y(this,c,v(j)),y(this,e,v(ee)),y(this,r,v(J)),y(this,t,v(Qe)),y(this,n,v(z)),this.myControl=new F(""),this.options=["Escriba el nombre del alimento"],this.opcionesAlimentos=[],this.descripcion="",this.instrucciones="",this.imagen="",this.marca="",this.cantidad="",this.calorias="",this.proteinas="",this.grasas="",this.carbohidratos="",this.azucares="",this.cantidadInicial="",this.nombreInicial="",this.receta=!1,this.comidaSeleccionada="",this.base64Image="./assets/icons/noImgBlack36.svg",this.imgPreview=!1,this.fecha="",this.hora="",this.nombreAlimento="",this.guardandoConsumo=!1,this.cantidadDisable=!0,this.recetaInfoDisponible=!1}ngOnInit(){if(this.nombreAlimento=this.data.nombre,this.nombreInicial=this.data.nombre,this.hora=this.data.hora,this.fecha=this.data.fecha,this.nombreAlimento==""||this.hora==""||this.nombreAlimento==null||this.hora==null){console.log("Error al recibir los datos"),g(this,t).close(),g(this,r).open("Error al recibir los datos","",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["error-snackbar"]});return}this.fetchData()}fetchData(){let u=localStorage.getItem("idUsuarioLogeado")||"";if(u===""){g(this,t).close(),console.log("No se ha podido obtener el id del usuario"),g(this,r).open("No ha sido posible realizar esta acci\xF3n","",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["success-snackbar"]});return}g(this,n).postConsumoDiarioEspecifico(u,this.fecha,this.hora).subscribe(s=>{if(s.respuesta==="No se encontr\xF3 dicho consumo."){console.log("No se ha encontrado el consumo"),g(this,t).close(),g(this,r).open("No se ha encontrado el consumo","",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["error-snackbar"]});return}else console.log(s.respuesta),this.cantidad=s.respuesta[0].cantidad,this.cantidadInicial=s.respuesta[0].cantidad,this.descripcion=s.respuesta[0].descripcion,this.imagen=s.respuesta[0].imagen,this.imgPreview=!0,this.calorias=s.respuesta[0].nutrientes.calorias,this.proteinas=s.respuesta[0].nutrientes.proteinas,this.grasas=s.respuesta[0].nutrientes.grasas,this.carbohidratos=s.respuesta[0].nutrientes.carbohidratos,this.azucares=s.respuesta[0].nutrientes.azucares,s.respuesta[0].marca==null?(this.receta=!0,this.instrucciones=s.respuesta[0].instrucciones):(this.receta=!1,this.marca=s.respuesta[0].marca),this.recetaInfoDisponible=!0})}guardarConsumo(){if(this.cantidad==this.cantidadInicial&&this.nombreAlimento==this.nombreInicial){console.log("No se ha modificado la cantidad"),g(this,r).open("No se han realizado modificaciones","",{duration:4e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["error-snackbar"]});return}else g(this,n).editarConsumoDiario(this.nombreAlimento,this.nombreInicial,this.fecha,this.hora,localStorage.getItem("idUsuarioLogeado")||"",this.cantidad+"").subscribe(u=>{u.code==200?(console.log("Consumo editado correctamente"),location.reload(),g(this,t).close(),g(this,r).open("Consumo ediado correctamente","",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["success-snackbar"]})):(console.log("Error al editar el consumo"),g(this,r).open("Fallo al guardar, revise los datos y vuela a intentarlo","",{duration:4e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["error-snackbar"]}))})}onInputChange(u){g(this,n).getBusquedaNombre(u).subscribe(s=>{console.log(s.respuesta);let I=[],D=[];if(s.respuesta==="No se ha encontrado el alimento")I.push({nombre:"No se encontraron resultados, prop\xF3n el tuyo!",tipo:"no-encontrado"});else for(let E of s.respuesta)E.marca==null?(console.log(E.nombre),console.log(E.marca),I.push({nombre:E.nombre,tipo:"receta"}),D.push(E.nombre)):(I.push({nombre:E.nombre,tipo:"alimento"}),D.push(E.nombre));this.opcionesAlimentos=I,this.opcionesAlimentosNombre=D})}mostrar(u){u=this.opcionesAlimentos.find(s=>s.nombre===u),u==null||(u.tipo=="receta"?g(this,n).getBusquedaReceta(u.nombre).subscribe(s=>{this.receta=!0,this.imgPreview=!0,this.descripcion=s.respuesta[0].descripcion,this.comidaSeleccionada=s.respuesta[0].nombre,this.base64Image=s.respuesta[0].imagen,this.instrucciones=s.respuesta[0].instrucciones,this.calorias=s.respuesta[0].calorias,this.proteinas=s.respuesta[0].proteinas,this.grasas=s.respuesta[0].grasas,this.carbohidratos=s.respuesta[0].carbohidratos,this.azucares=s.respuesta[0].azucares,this.dataNutrientes=s.respuesta[0]}):g(this,n).getBusquedaNombre(u.nombre).subscribe(s=>{this.imgPreview=!0,this.receta=!1,this.descripcion=s.respuesta[0].descripcion,this.comidaSeleccionada=s.respuesta[0].nombre,this.base64Image=s.respuesta[0].imagen,this.marca=s.respuesta[0].marca,this.calorias=s.respuesta[0].calorias,this.proteinas=s.respuesta[0].proteinas,this.grasas=s.respuesta[0].grasas,this.carbohidratos=s.respuesta[0].carbohidratos,this.azucares=s.respuesta[0].azucares,this.dataNutrientes=s.respuesta[0]}))}closeDialog(){g(this,t).close()}obtenerFecha(){return new Date().toISOString().split("T")[0]}};c=new WeakMap,e=new WeakMap,r=new WeakMap,t=new WeakMap,n=new WeakMap,m.\u0275fac=function(s){return new(s||m)(L(K))},m.\u0275cmp=N({type:m,selectors:[["app-form-editar-consumo"]],standalone:!0,features:[$([te()]),W],decls:2,vars:1,consts:[[1,"proponerRecetaBody"],[1,"contenedor"],[1,"header"],[1,"divTitulo"],[1,"divInfo"],[1,"datosReceta"],[1,"partePrinciapl"],[1,"principalIzq"],[1,"input-div"],["for","nombre",1,"labelInput"],[3,"ngModelChange","completeMethod","click","ngModel","suggestions"],["for","descripcion",1,"labelInput"],["id","descripcion","rows","5","cols","15","pInputTextarea","","disabled","true",3,"ngModelChange","ngModel"],[1,"principalDer"],["for","cantidad",1,"labelInput"],["pInputNumber","","type","number","id","cantidad","mode","decimal",3,"ngModelChange","ngModel","min"],[1,"parteNutrientes"],[1,"columna1"],[1,"input-div-disabled"],["for","calorias",1,"labelInput"],["pInputNumber","","id","calorias","mode","decimal","disabled","true",3,"ngModelChange","ngModel","min"],["for","proteinas",1,"labelInput"],["pInputNumber","","id","proteinas","mode","decimal","disabled","true",3,"ngModelChange","ngModel","min"],["for","grasas",1,"labelInput"],["pInputNumber","","id","grasas","mode","decimal","disabled","true",3,"ngModelChange","ngModel","min"],[1,"columna2"],["for","carbohidratos",1,"labelInput"],["pInputNumber","","id","carbohidratos","mode","decimal","disabled","true",3,"ngModelChange","ngModel","min"],["for","azucares",1,"labelInput"],["pInputNumber","","id","azucares","mode","decimal","disabled","true",3,"ngModelChange","ngModel","min"],[1,"columna3"],[1,"parteImagen"],[1,"image-placeholder"],["alt","Imagen de muestra","width","200","height","200",3,"src","preview"],[1,"pieForm"],[1,"btnEliminar",3,"click"],[1,"btnCancelar",3,"click"],["for","instrucciones",1,"labelInput"],["id","instrucciones","rows","5","cols","15","pInputTextarea","","disabled","true",3,"ngModelChange","ngModel"],["for","marca",1,"labelInput"],["pInputNumber","","id","marca","mode","decimal","disabled","true",3,"ngModelChange","ngModel","min"]],template:function(s,I){s&1&&S(0,at,60,19,"div",0)(1,rt,1,0),s&2&&k(0,I.recetaInfoDisponible?0:1)},dependencies:[B,pe,Y,R,X,Pe,Q,Ie,re,oe,G,se,de,ce,me,ue,Ye,le],styles:["body[_ngcontent-%COMP%]{background-color:#f5f5f5;overflow-y:scroll}.proponerRecetaBody[_ngcontent-%COMP%]{max-width:100%;min-height:auto;background-color:#fff;border:2px solid black;padding:0 20px 20px;box-shadow:0 4px 8px #0000001a}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-direction:column}.divTitulo[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}h2[_ngcontent-%COMP%]{font-size:clamp(1rem,1.8vw,2rem)}.divInfo[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:0}.contenedor[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.partePrinciapl[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.principalIzq[_ngcontent-%COMP%], .principalDer[_ngcontent-%COMP%]{width:48%;display:flex;flex-direction:column;align-items:center}.parteNutrientes[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;margin-top:2%}.columna1[_ngcontent-%COMP%], .columna2[_ngcontent-%COMP%]{width:25%;display:flex;flex-direction:column;align-items:center;margin-bottom:2%;padding-left:5%}.columna3[_ngcontent-%COMP%]{width:50%;display:flex;flex-direction:column;align-items:center;margin-bottom:2%}.input-div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:#fff;border:1px solid black;width:80%;padding:.6rem;border-radius:4px;display:flex;align-items:center}.input-div-disabled[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:flex!important;flex-direction:column!important;width:80%;padding:.6rem;border-radius:4px;display:flex;background-color:#f5f5f5;border:1px solid var(--EXTRA_WHITE)}.input-div[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{display:flex!important;flex-direction:column!important;width:80%;background-color:#f5f5f5;border:1px solid var(--EXTRA_WHITE);border-radius:4px}.input-div[_ngcontent-%COMP%], .input-div-disabled[_ngcontent-%COMP%]{display:flex!important;flex-direction:column!important;margin:1%;width:80%}.labelInput[_ngcontent-%COMP%]{font-size:1rem;margin:.2rem}.parteImagen[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.image-placeholder[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:100%}.pieForm[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly}button[_ngcontent-%COMP%]{color:#fff;padding:15px 60px;border:none;border-radius:5px;font-size:16px}.btnEliminar[_ngcontent-%COMP%]{background-color:var(--ERROR_500)}.btnCancelar[_ngcontent-%COMP%]{background-color:var(--SUCCESS_600)}@media (max-width: 768px){.partePrinciapl[_ngcontent-%COMP%]{flex-direction:column;justify-content:space-evenly;width:100%}.principalIzq[_ngcontent-%COMP%], .principalDer[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:space-evenly}.principalIzq[_ngcontent-%COMP%]   .input-div[_ngcontent-%COMP%], .principalDer[_ngcontent-%COMP%]   .input-div[_ngcontent-%COMP%], .input-div[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .input-div-disabled[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-div[_ngcontent-%COMP%], .principalDer[_ngcontent-%COMP%]   .input-div-disabled[_ngcontent-%COMP%]{width:100%}.parteNutrientes[_ngcontent-%COMP%]{flex-direction:column;justify-content:space-evenly;width:100%}.columna1[_ngcontent-%COMP%], .columna2[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap}.columna3[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.pieForm[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-evenly;align-items:center;width:100%}button[_ngcontent-%COMP%]{margin-top:6%;padding:7px 0!important;width:60%;font-size:12px}}"]});let i=m;return i})();function lt(i,c){if(i&1){let e=O();a(0,"div",7)(1,"label",27),l(2,"Calor\xEDas (kcal)"),o(),a(3,"input",28),M("ngModelChange",function(t){f(e);let n=p(2);return b(n.calorias,t)||(n.calorias=t),C(t)}),o()()}if(i&2){let e=p(2);d(3),x("ngModel",e.calorias),_("min",1)}}function st(i,c){if(i&1){let e=O();a(0,"div",11)(1,"label",29),l(2,"Descripci\xF3n"),o(),a(3,"textarea",30),M("ngModelChange",function(t){f(e);let n=p(2);return b(n.textareaContent,t)||(n.textareaContent=t),C(t)}),l(4," "),o()()}if(i&2){let e=p(2);d(3),x("ngModel",e.textareaContent)}}function ct(i,c){if(i&1){let e=O();a(0,"div",11)(1,"label",31),l(2,"Instrucciones"),o(),a(3,"textarea",32),M("ngModelChange",function(t){f(e);let n=p(2);return b(n.instrucciones,t)||(n.instrucciones=t),C(t)}),l(4," "),o()()}if(i&2){let e=p(2);d(3),x("ngModel",e.instrucciones)}}function dt(i,c){if(i&1){let e=O();a(0,"div",7)(1,"label",33),l(2,"Marca del alimento "),o(),a(3,"input",34),M("ngModelChange",function(t){f(e);let n=p(2);return b(n.marca,t)||(n.marca=t),C(t)}),o()()}if(i&2){let e=p(2);d(3),x("ngModel",e.marca),_("min",1)}}function mt(i,c){if(i&1){let e=O();a(0,"div",11)(1,"label",29),l(2,"Descripci\xF3n"),o(),a(3,"textarea",30),M("ngModelChange",function(t){f(e);let n=p(2);return b(n.textareaContent,t)||(n.textareaContent=t),C(t)}),l(4," "),o()()}if(i&2){let e=p(2);d(3),x("ngModel",e.textareaContent)}}function pt(i,c){if(i&1){let e=O();a(0,"div",7)(1,"label",27),l(2,"Calor\xEDas (kcal)"),o(),a(3,"input",28),M("ngModelChange",function(t){f(e);let n=p(2);return b(n.calorias,t)||(n.calorias=t),C(t)}),o()()}if(i&2){let e=p(2);d(3),x("ngModel",e.calorias),_("min",1)}}function ut(i,c){if(i&1){let e=O();a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),l(5),o()()(),a(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"label",8),l(11,"Nombre"),o(),a(12,"input",9),M("ngModelChange",function(t){f(e);let n=p();return b(n.nombreAlimento,t)||(n.nombreAlimento=t),C(t)}),o()(),S(13,lt,4,2,"div",7)(14,st,5,1),o(),a(15,"div",10),S(16,ct,5,1,"div",11)(17,dt,4,2)(18,mt,5,1,"div",11),o()(),a(19,"div",12)(20,"div",13),S(21,pt,4,2,"div",7),a(22,"div",7)(23,"label",14),l(24,"Prote\xEDnas (gr)"),o(),a(25,"input",15),M("ngModelChange",function(t){f(e);let n=p();return b(n.proteinas,t)||(n.proteinas=t),C(t)}),o()(),a(26,"div",7)(27,"label",16),l(28,"Grasas (gr)"),o(),a(29,"input",17),M("ngModelChange",function(t){f(e);let n=p();return b(n.grasas,t)||(n.grasas=t),C(t)}),o()()(),a(30,"div",18)(31,"div",7)(32,"label",19),l(33,"Carbohidratos"),o(),a(34,"input",20),M("ngModelChange",function(t){f(e);let n=p();return b(n.carbohidratos,t)||(n.carbohidratos=t),C(t)}),o()(),a(35,"div",7)(36,"label",21),l(37,"Az\xFAcares (gr)"),o(),a(38,"input",22),M("ngModelChange",function(t){f(e);let n=p();return b(n.azucares,t)||(n.azucares=t),C(t)}),o()()(),a(39,"div",23)(40,"div",24)(41,"div",25),T(42,"p-image",26),o()()()()()()()}if(i&2){let e=p();d(5),q("Informacion de la ",e.receta?"receta":"comida",""),d(7),x("ngModel",e.nombreAlimento),d(),k(13,e.tamanoPantalla=="mediana"||e.tamanoPantalla=="pequena"?13:e.tamanoPantalla=="grande"?14:-1),d(3),k(16,e.receta?16:17),d(2),k(18,e.tamanoPantalla=="pequena"||e.tamanoPantalla=="mediana"?18:-1),d(3),k(21,e.tamanoPantalla=="grande"?21:-1),d(4),x("ngModel",e.proteinas),_("min",1),d(4),x("ngModel",e.grasas),_("min",1),d(5),x("ngModel",e.carbohidratos),_("min",1),d(4),x("ngModel",e.azucares),_("min",1),d(4),_("src",e.base64Image)("preview",e.imgPreview)}}function gt(i,c){i&1&&T(0,"app-spinner-mostrar")}var tt=(()=>{var c,e,r,t,n,m,h;let u=class u{constructor(I){w(this,c,void 0);w(this,e,void 0);w(this,r,void 0);w(this,t,void 0);w(this,n,void 0);w(this,m,void 0);w(this,h,void 0);this.data=I,this.ruta="http://localhost:8000",y(this,c,v(j)),y(this,e,v(ee)),y(this,r,v(J)),y(this,t,v(we)),y(this,n,v(Ze)),y(this,m,v(Ne)),y(this,h,v(z)),this.myControl=new F(""),this.options=["Escriba el nombre del alimento"],this.opcionesAlimentos=[],this.textareaContent="Descripci\xF3n del alimento",this.instrucciones="",this.imagen="",this.marca="",this.cantidad="",this.calorias="",this.proteinas="",this.grasas="",this.carbohidratos="",this.azucares="",this.receta=!1,this.nombreAlimento="",this.comidaSeleccionada="",this.base64Image="./assets/icons/noImgBlack36.svg",this.imgPreview=!1,this.guardandoConsumo=!1,this.cantidadDisable=!0,this.recetaInfoDisponible=!1,this.tamanoPantalla="pantalla"}ngOnInit(){this.tamanoPantallaSub=g(this,m).tamanoPantalla$.subscribe(P=>{this.tamanoPantalla=P});let I=localStorage.getItem("idUsuarioLogeado")||"";I===""&&g(this,e).navigate(["/login"]);let D=this.data.comida.Dia,E=this.data.comida.Hora;console.log(D),console.log(E),g(this,h).postConsumoDiarioNombre(I,D,E).subscribe(P=>{P.respuesta==="No se ha encontrado el alimento"?(g(this,c).closeAll(),g(this,r).open("No se ha encontrado el alimento","Cerrar",{duration:5e3})):(this.nombreAlimento=P.respuesta.comida,this.textareaContent=P.respuesta.descripcion,this.cantidad=P.respuesta.cantidad,this.proteinas=P.respuesta.nutrientes.proteinas,this.carbohidratos=P.respuesta.nutrientes.carbohidratos,this.grasas=P.respuesta.nutrientes.grasas,this.azucares=P.respuesta.nutrientes.azucares,this.calorias=P.respuesta.nutrientes.calorias,this.imagen=P.respuesta.imagen,this.imgPreview=!0,this.base64Image=P.respuesta.imagen,P.respuesta.marca===void 0?(this.receta=!0,this.instrucciones=P.respuesta.instrucciones):(this.receta=!1,this.marca=P.respuesta.marca),console.log(P.respuesta)),setTimeout(()=>{this.recetaInfoDisponible=!0},900)})}};c=new WeakMap,e=new WeakMap,r=new WeakMap,t=new WeakMap,n=new WeakMap,m=new WeakMap,h=new WeakMap,u.\u0275fac=function(D){return new(D||u)(L(K))},u.\u0275cmp=N({type:u,selectors:[["app-info-comida"]],standalone:!0,features:[W],decls:2,vars:1,consts:[[1,"proponerRecetaBody"],[1,"contenedor"],[1,"header"],[1,"divTitulo"],[1,"datosReceta"],[1,"partePrinciapl"],[1,"principalIzq"],[1,"input-div-disabled"],["for","nombre",1,"labelInput"],["pInputText","",3,"ngModelChange","ngModel"],[1,"principalDer"],[1,"input-div"],[1,"parteNutrientes"],[1,"columna1"],["for","proteinas",1,"labelInput"],["pInputNumber","","id","proteinas","mode","decimal","disabled","true",3,"ngModelChange","ngModel","min"],["for","grasas",1,"labelInput"],["pInputNumber","","id","grasas","mode","decimal","disabled","true",3,"ngModelChange","ngModel","min"],[1,"columna2"],["for","carbohidratos",1,"labelInput"],["pInputNumber","","id","carbohidratos","mode","decimal","disabled","true",3,"ngModelChange","ngModel","min"],["for","azucares",1,"labelInput"],["pInputNumber","","id","azucares","mode","decimal","disabled","true",3,"ngModelChange","ngModel","min"],[1,"columna3"],[1,"parteImagen"],[1,"image-placeholder"],["alt","Imagen de muestra","width","200","height","200",3,"src","preview"],["for","calorias",1,"labelInput"],["pInputNumber","","id","calorias","mode","decimal","disabled","true",3,"ngModelChange","ngModel","min"],["for","textareaContent",1,"labelInput"],["id","textareaContent","rows","5","cols","15","pInputTextarea","","disabled","true",3,"ngModelChange","ngModel"],["for","instrucciones",1,"labelInput"],["id","instrucciones","rows","5","cols","15","pInputTextarea","","disabled","true",3,"ngModelChange","ngModel"],["for","marca",1,"labelInput"],["pInputNumber","","id","marca","mode","decimal","disabled","true",3,"ngModelChange","ngModel","min"]],template:function(D,E){D&1&&S(0,ut,43,16,"div",0)(1,gt,1,0),D&2&&k(0,E.recetaInfoDisponible?0:1)},dependencies:[B,pe,Y,R,X,Q,re,oe,le,G,se,de,ce,me,ue],styles:["body[_ngcontent-%COMP%]{background-color:#f5f5f5}.proponerRecetaBody[_ngcontent-%COMP%]{max-width:100%;min-height:auto;background-color:#fff;border:2px solid black;padding:0 20px 20px;box-shadow:0 4px 8px #0000001a}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-direction:column}.divTitulo[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}h2[_ngcontent-%COMP%]{font-size:clamp(1rem,1.8vw,2rem)}.divInfo[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:0}.contenedor[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.partePrinciapl[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.principalIzq[_ngcontent-%COMP%], .principalDer[_ngcontent-%COMP%]{width:48%;display:flex;flex-direction:column;align-items:center}.parteNutrientes[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;margin-top:2%}.columna1[_ngcontent-%COMP%], .columna2[_ngcontent-%COMP%]{width:25%;display:flex;flex-direction:column;align-items:center;margin-bottom:2%;padding-left:5%}.columna3[_ngcontent-%COMP%]{width:50%;display:flex;flex-direction:column;align-items:center;margin-bottom:2%}.input-div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:#fff;border:1px solid black;width:80%;padding:.6rem;border-radius:4px;display:flex;align-items:center}.input-div-disabled[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:flex!important;flex-direction:column!important;width:80%;padding:.6rem;border-radius:4px;display:flex;background-color:#f5f5f5;border:1px solid var(--EXTRA_WHITE)}.input-div[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{display:flex!important;flex-direction:column!important;width:80%;background-color:#f5f5f5;border:1px solid var(--EXTRA_WHITE);border-radius:4px}.input-div[_ngcontent-%COMP%], .input-div-disabled[_ngcontent-%COMP%]{display:flex!important;flex-direction:column!important;margin:1%;width:80%}.labelInput[_ngcontent-%COMP%]{font-size:1rem;margin:.2rem}.parteImagen[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.image-placeholder[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:100%}.parteBotones[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;margin-top:2%}button[_ngcontent-%COMP%]{color:#fff;padding:10px 25px;border:none;border-radius:5px;font-size:16px}.btnRechazar[_ngcontent-%COMP%]{background-color:var(--TERTIARY_600)}.btnAceptar[_ngcontent-%COMP%]{background-color:var(--SUCCESS_600)}@media (max-width: 768px){h1[_ngcontent-%COMP%]{font-size:24px}.partePrinciapl[_ngcontent-%COMP%], .parteNutrientes[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center}.principalIzq[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;justify-content:space-evenly}.principalIzq[_ngcontent-%COMP%]   .input-div-disabled[_ngcontent-%COMP%]{width:45%}.principalDer[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}.input-div[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .input-div-disabled[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-div[_ngcontent-%COMP%], .principalDer[_ngcontent-%COMP%]   .input-div-disabled[_ngcontent-%COMP%]{width:100%}.columna1[_ngcontent-%COMP%], .columna2[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;justify-content:space-evenly}.columna1[_ngcontent-%COMP%]   .input-div-disabled[_ngcontent-%COMP%], .columna2[_ngcontent-%COMP%]   .input-div-disabled[_ngcontent-%COMP%]{width:45%}.columna3[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center}}"]});let i=u;return i})();function ft(i,c){i&1&&(a(0,"th",15),l(1,"Dia"),o())}function Ct(i,c){if(i&1&&(a(0,"td",16),l(1),o()),i&2){let e=c.$implicit;d(),A(e.Dia)}}function _t(i,c){i&1&&(a(0,"th",15),l(1,"Hora"),o())}function ht(i,c){if(i&1&&(a(0,"td",16),l(1),o()),i&2){let e=c.$implicit;d(),A(e.Hora)}}function xt(i,c){i&1&&(a(0,"th",15),l(1,"Nombre"),o())}function bt(i,c){if(i&1){let e=O();a(0,"td",16)(1,"a",17),V("click",function(t){let n=f(e).$implicit,m=p(2);return C(m.mostrarInfoComida(n,t))}),l(2),o()()}if(i&2){let e=c.$implicit;d(2),q(" ",e.Nombre," ")}}function Mt(i,c){i&1&&(a(0,"th",15),l(1,"Calorias"),o())}function wt(i,c){if(i&1&&(a(0,"td",16),l(1),o()),i&2){let e=c.$implicit;d(),A(e.Calorias)}}function yt(i,c){i&1&&(a(0,"th",18),l(1,"Acciones"),o())}function vt(i,c){if(i&1){let e=O();a(0,"td",19)(1,"div",20)(2,"img",21),V("click",function(){let t=f(e).$implicit,n=p(2);return C(n.editarComida(t))}),o(),a(3,"img",22),V("click",function(){let t=f(e).$implicit,n=p(2);return C(n.eliminarComida(t))}),o()()()}}function Pt(i,c){i&1&&T(0,"tr",23)}function St(i,c){i&1&&T(0,"tr",24)}function It(i,c){if(i&1&&(a(0,"table",3),H(1,4),S(2,ft,2,0,"th",5)(3,Ct,2,1,"td",6),U(),H(4,7),S(5,_t,2,0,"th",5)(6,ht,2,1,"td",6),U(),H(7,8),S(8,xt,2,0,"th",5)(9,bt,3,1,"td",6),U(),H(10,9),S(11,Mt,2,0,"th",5)(12,wt,2,1,"td",6),U(),H(13,10),S(14,yt,2,0,"th",11)(15,vt,4,0,"td",12),U(),S(16,Pt,1,0,"tr",13)(17,St,1,0,"tr",14),o()),i&2){let e=p();_("dataSource",e.dataSource),d(16),_("matHeaderRowDef",e.displayedColumns),d(),_("matRowDefColumns",e.displayedColumns)}}function Ot(i,c){if(i&1&&(a(0,"div",25)(1,"p"),l(2,"!No se encontraron alimentos consumidos!"),o(),a(3,"div",26)(4,"div")(5,"mat-label"),l(6,"Selecciona un rango de fechas"),o(),T(7,"mat-datepicker-toggle",27)(8,"mat-date-range-picker",28,0),a(10,"mat-date-range-input",29),T(11,"input",30)(12,"input",31),o()()()()),i&2){let e=Me(9),r=p();d(7),_("for",e),d(3),_("formGroup",r.rangoFechas)("rangePicker",e)}}function Dt(i,c){i&1&&(a(0,"div",32),T(1,"mat-spinner"),a(2,"p"),l(3,"Comprobando registros..."),o()())}var Zn=(()=>{var c,e,r;let t=class t{constructor(){w(this,c,void 0);w(this,e,void 0);w(this,r,void 0);y(this,c,v(z)),y(this,e,v(j)),y(this,r,v(J)),this.existeData=!1,this.sinDatos=!1,this.displayedColumns=["Dia","Hora","Nombre","Calorias","Acciones"],this.newData=[],this.dataSource=new fe(this.newData),this.fechaInicio=new Date,this.fechaFin=new Date,this.fechaInicioMostrar="",this.fechaFinMostrar="",this.rangoFechas=new ie({start:new F(null),end:new F(null)})}ngOnInit(){this.fetchData()}ngAfterViewInit(){let m=setInterval(()=>{this.existeData&&(this.dataSource.sort=this.sort,clearInterval(m))},500)}fetchData(){this.rangoFechas.valueChanges.subscribe(u=>{u.start&&u.end&&(this.fechaInicio=new Date(u.start.toISOString().split("T")[0]),this.fechaInicio.setDate(this.fechaInicio.getDate()+1),this.fechaFin=new Date(u.end.toISOString().split("T")[0]),this.fechaFin.setDate(this.fechaFin.getDate()+1),localStorage.setItem("fechaInicioHome",this.fechaInicio.toISOString()),localStorage.setItem("fechaFinHome",this.fechaFin.toISOString()),this.fetchData())});let m=localStorage.getItem("fechaFinHome")?new Date(localStorage.getItem("fechaFinHome")||""):new Date,h=localStorage.getItem("fechaInicioHome")?new Date(localStorage.getItem("fechaInicioHome")||""):new Date(new Date().setDate(new Date().getDate()-30));g(this,c).getConsumoDiario(localStorage.getItem("idUsuarioLogeado"),h,m).subscribe(u=>{if(u.respuesta==="No se encontraron entradas en las fechas indicadas."){console.log("No se encontraron entradas en las fechas indicadas."),this.sinDatos=!0;return}this.existeData=!0,this.newData=u.respuesta.filter(s=>s.id!==void 0).map(s=>{let I=s.hora.date.split(" ")[1];return{Dia:s.fecha.date.split(" ")[0],Nombre:s.comida,Hora:I.split(".")[0],Calorias:s.nutrientes.calorias}}),this.dataSource=new fe(this.newData),this.dataSource.sort=this.sort})}obtenerFecha(){return new Date().toISOString().split("T")[0]}eliminarComida(m){if(console.log(m),(localStorage.getItem("idUsuarioLogeado")||"")===""){console.log("No se ha podido obtener el id del usuario");return}g(this,e).open($e,{width:"70%",data:{nombre:m.Nombre,hora:m.Hora,calorias:m.Calorias,fecha:m.Dia}})}editarComida(m){g(this,e).open(et,{width:"70%",height:"90%",data:{nombre:m.Nombre,hora:m.Hora,calorias:m.Calorias,fecha:m.Dia}})}mostrarInfoComida(m,h){h.preventDefault(),g(this,e).open(tt,{width:"80%",data:{comida:m}})}};c=new WeakMap,e=new WeakMap,r=new WeakMap,t.\u0275fac=function(h){return new(h||t)},t.\u0275cmp=N({type:t,selectors:[["app-tabla-comidas"]],viewQuery:function(h,u){if(h&1&&he(ge,5),h&2){let s;xe(s=be())&&(u.sort=s.first)}},standalone:!0,features:[$([te()]),W],decls:5,vars:1,consts:[["picker",""],[1,"page-container"],[1,"table-wrapper"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","Dia"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Hora"],["matColumnDef","Nombre"],["matColumnDef","Calorias"],["matColumnDef","Acciones"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","td-acciones",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["href","#",3,"click"],["mat-header-cell",""],["mat-cell","",1,"td-acciones"],[1,"acciones-container"],["src","../../../assets/icons/editBlack12.svg","alt","",1,"edit-button","fakeButton",3,"click"],["src","../../../assets/icons/deleteBlack12.svg","alt","",1,"delete-button","fakeButton",3,"click"],["mat-header-row",""],["mat-row",""],[1,"divNoData"],[1,"date-container"],["matIconSuffix","",3,"for"],["touchUi",""],[3,"formGroup","rangePicker"],["matStartDate","","formControlName","start","placeholder","Start date","hidden",""],["matEndDate","","formControlName","end","placeholder","End date","hidden",""],[1,"loading-container"]],template:function(h,u){h&1&&(a(0,"div",1)(1,"div",2),S(2,It,18,3,"table",3)(3,Ot,13,3)(4,Dt,4,0),o()()),h&2&&(d(2),k(2,u.existeData?2:u.sinDatos?3:4))},dependencies:[Xe,We,Re,He,Be,ze,Ue,je,Le,qe,Ge,ye,B,Oe,De,Ae,Ee,ke,Te,Fe,Ve,R,X,Q,ne,ae,Se,Je,ge,Ke],styles:[".page-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;align-items:center;width:100%;padding:20px}.table-wrapper[_ngcontent-%COMP%]{width:100%;max-height:500px;overflow-y:auto;overflow-x:auto;margin-bottom:20px;position:relative;display:block}table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%;border-radius:8px;min-width:500px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px 15px;text-align:center;border-bottom:1px solid var(--PRIMARY_600)}th[_ngcontent-%COMP%]{font-weight:700;background-color:var(--PRIMARY_500)!important;color:#fff;position:sticky;top:0;z-index:1}.accionesDiv[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;align-items:center}.edit-button[_ngcontent-%COMP%], .delete-button[_ngcontent-%COMP%]{background:none;border:none;font-size:16px}.edit-button[_ngcontent-%COMP%]{margin-right:10px}.divNoData[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:20px}.fakeButton[_ngcontent-%COMP%]{cursor:pointer}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:20px}@media (max-width: 768px){.table-wrapper[_ngcontent-%COMP%]{width:90%;overflow-x:auto}table[_ngcontent-%COMP%]{max-width:500px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:8px 10px;font-size:18px}td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:18px}.accionesDiv[_ngcontent-%COMP%]{width:100%;flex-direction:row;justify-content:space-evenly;align-items:center}.edit-button[_ngcontent-%COMP%], .delete-button[_ngcontent-%COMP%]{font-size:12px}}@media (max-width: 576px){.table-wrapper[_ngcontent-%COMP%]{width:90%;max-width:fit-content;overflow-x:auto}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%], td[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:14px}.edit-button[_ngcontent-%COMP%], .delete-button[_ngcontent-%COMP%]{font-size:12px}}"]});let i=t;return i})();export{Zn as a};
